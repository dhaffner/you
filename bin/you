#!/usr/bin/env python

import baker

from you import main


@baker.command(default=True, shortopts={
    "no_window": "n",
    "search": "s",
    "lucky": "l"
})
def play(no_window=False, search=False, lucky=False, v=None, url=None, *query):
    controller = main.You(no_window=no_window)

    if v and not url:
        url = 'http://www.youtube.com/watch?v={}'.format(v)

    if search:
        controller.search(' '.join(query), lucky=lucky)

    elif url:
        controller.play(url)


@baker.command(shortopts={"no_window": "n"})
def search(no_window=False, *query):
    controller = main.You(no_window=no_window)
    controller.search(' '.join(query))


@baker.command
def extract(url):
    controller = main.You(no_window=True)
    controller.extract(url)


if __name__ == '__main__':
    # parser = argparse.ArgumentParser(description='A videoless command-line YouTube player.')

    # parser.add_argument('--config', nargs='?', dest='config', metavar='filename',
    #                     help='configuration file (currently not implemented)')
    # parser.add_argument('term', nargs='*',
    #                     help='term(s) to search for')

    # args = parser.parse_args()

    # main = you.You(args)
    # main.run()
    baker.run()
