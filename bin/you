#!/usr/bin/env python

import baker

from you import you


@baker.command(default=True, shortopts={"no_window": "n", "search": "s"})
def play(no_window=False, search=False, v=None, url=None, *query):
    main = you.You(no_window=no_window)

    if v and not url:
        url = 'http://youtube.com/v/{}'.format(v)

    if search:
        main.search(' '.join(query))

    elif url:
        main.extract(url)  # TODO refactor into actual play method


@baker.command(shortopts={"no_window": "n"})
def search(no_window=False, *query):
    main = you.You(no_window=no_window)
    main.search(' '.join(query))


@baker.command
def extract(url):
    main = you.You(no_window=True)
    main.extract(url)
    print(ul)


if __name__ == '__main__':
    # parser = argparse.ArgumentParser(description='A videoless command-line YouTube player.')

    # parser.add_argument('--config', nargs='?', dest='config', metavar='filename',
    #                     help='configuration file (currently not implemented)')
    # parser.add_argument('term', nargs='*',
    #                     help='term(s) to search for')

    # args = parser.parse_args()

    # main = you.You(args)
    # main.run()
    baker.run()
